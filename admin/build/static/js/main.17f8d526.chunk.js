(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[0],{26:function(e,t){e.exports={translation:{admin:"Admin",account_current_password:"Current password",account_current_password_incorrect:"Current password is incorrect.",account_new_password:"New password",account_new_password_invalid:"New password is not valid.",account_new_username:"New email",account_password_instructions:"Passwords must be at least 8 characters long.",account_title:"Account",account_update_password_submit:"Update password",account_update_password_success:"Your password was updated successfully.",account_update_password_title:"Update password",account_update_username_fail:"There was an error updating your email.",account_update_username_submit:"Update email",account_update_username_success:"Your email was changed successfully.",account_update_username_title:"Update email",create_checkpoint_additional_language:"PDF Language",create_checkpoint_additional_language_none:"English only",create_checkpoint_address:"Search for location",create_checkpoint_email:"Location contact email (optional)",create_checkpoint_external_map:"Open Google maps in new tab",create_checkpoint_lat:"Latitude",create_checkpoint_long:"Longitude",create_checkpoint_name:"Location name",create_checkpoint_phone:"Location contact phone (optional)",create_checkpoint_submit:"Get Checkpoint QR Code",create_checkpoint_title:"Create a Checkpoint QR code",login_forgot_password:"Forgot your password?",login_no_account_1:"Don't have an account? You can request access",login_no_account_2:"here",login_password:"Password",login_submit_button:"Sign in",login_title:"Please sign in",login_username:"Email",logout_button:"Sign out",menu_account:"Account",menu_checkpoint_pdf:"New Checkpoint",menu_checkpoints:"Upload Checkpoints",menu_reports:"Reports",menu_users:"Users",reset_password_cancel:"Back to login",reset_password_request_fail:"We could not find an account with that email address.",reset_password_request_submit:"Get a reset link",reset_password_request_success:"Please check your email for a link to reset your password.",reset_password_request_title:"Reset your password",reset_password_fail:"Password reset failed: this reset link is expired or invalid.",reset_password_submit:"Reset",reset_password_success:"Your password has been reset successfully.",reset_password_title:"Reset your password",upload_fail:"Oops, that upload failed.",upload_instructions_1:"A COVID-19 positive patient can open the web app at",upload_instructions_2:'The patient should open the "Status" tab, and press "Download Checkpoints". This will download a file to the patient\'s phone, which the patient can email to you.',upload_instructions_3:"Once you have the file, you may upload it using the button below.",upload_success:"The checkpoints were uploaded successfully.",upload_title:"Upload Checkpoints",user_create_can_access_reports:"Can access reports",user_create_can_create_checkpoints:"Can create checkpoints",user_create_can_manage_users:"Can manage other users",user_create_can_upload_checkpoints:"Can upload checkpoints",user_create_can_manage_countries:"Can manage countries & locales",user_create_exit:"Return to all users",user_create_fail:"Oops, there was an error creating this user.",user_create_invalid_username:"Invalid email address.",user_create_submit:"Create",user_create_success:"A new user was created with the following email. They should receive an email with their login credentials shortly.",user_create_title:"Create a new user",user_create_username:"Email",user_create_password:"Temporary password",user_delete_button:"Delete",user_delete_confirm:"Delete user",user_delete_fail:"Oops, something went wrong.",reports_title:"Reports",reports_csv:"Download CSV of Hotspots",welcome:"Logged in as"}}},32:function(e,t,a){e.exports=a(51)},37:function(e,t,a){},38:function(e,t,a){},40:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(24),s=a.n(c),o=(a(37),a(38),a(21)),l=a(13),u=a(25),i=a(26),p={en:a.n(i).a};o.a.use(u.a).use(l.f).init({resources:p,fallbackLng:"en",keySeparator:!1,interpolation:{escapeValue:!1},detection:{order:["querystring","cookie","localStorage","navigator","htmlTag","path","subdomain"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupFromPathIndex:0,lookupFromSubdomainIndex:0,caches:["localStorage","cookie"],excludeCacheFor:["cimode"],cookieMinutes:10,cookieDomain:"myDomain",htmlTag:document.documentElement,checkWhitelist:!0}});o.a;var m=a(1),d=a.n(m),f=a(2),h=a(3),b=a(7),_=a(5),w=a(31),g=a(52),v=(a(40),"".concat("https://tracking-covid-19-gambia.herokuapp.com")),k=function(){var e=Object(f.a)(d.a.mark((function e(t){var a,n,r,c=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:"GET",n=c.length>2?c[2]:void 0,e.next=4,fetch("".concat(t),{method:a,body:n?JSON.stringify(n):void 0,headers:{"Content-Type":"application/json",authorization:void 0}});case 4:return r=e.sent,e.abrupt("return",r.json());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(f.a)(d.a.mark((function e(t){var a,n,r,c=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:"GET",n=c.length>2?c[2]:void 0,e.next=4,fetch("".concat(v).concat(t),{method:a,body:n?JSON.stringify(n):void 0,headers:{"Content-Type":"application/json"},credentials:"include"});case 4:return r=e.sent,e.abrupt("return",r.json());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(f.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("/admin/login","POST",{username:t,password:a});case 2:return n=e.sent,e.abrupt("return",n&&n.isLoggedIn);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),x=function(){var e=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("/admin/api/status");case 2:return t=e.sent,e.abrupt("return",t&&t.isLoggedIn?t.user:void 0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("/admin/api/users");case 2:return t=e.sent,e.abrupt("return",t&&t.users?t.users:void 0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(f.a)(d.a.mark((function e(t){var a,n,r,c,s,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.username,n=t.canUploadCheckpoints,r=t.canCreateCheckpoints,c=t.canManageUsers,s=t.canAccessReports,e.next=3,E("/admin/api/users","POST",{username:a,canUploadCheckpoints:n,canCreateCheckpoints:r,canManageUsers:c,canAccessReports:s});case 3:return o=e.sent,e.abrupt("return",o&&!o.error?o.user:void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(f.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.username,e.next=3,E("/admin/api/users/reset-password-request","POST",{username:a});case 3:return n=e.sent,e.abrupt("return",n&&!n.error);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(f.a)(d.a.mark((function e(t){var a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.token,n=t.newPassword,e.next=3,E("/admin/api/users/reset-password","POST",{token:a,newPassword:n});case 3:return r=e.sent,e.abrupt("return",r&&!r.error);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(f.a)(d.a.mark((function e(t){var a,n,r,c,s,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.userId,n=t.canUploadCheckpoints,r=t.canCreateCheckpoints,c=t.canManageUsers,s=t.canAccessReports,e.next=3,E("/admin/api/users/".concat(a),"PUT",{canUploadCheckpoints:n,canCreateCheckpoints:r,canManageUsers:c,canAccessReports:s});case 3:return o=e.sent,e.abrupt("return",o&&!o.error);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(f.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.username,e.next=3,E("/admin/api/account","PUT",{username:a});case 3:return n=e.sent,e.abrupt("return",n&&!n.error);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(f.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("/admin/api/account","PUT",{currentPassword:t,newPassword:a});case 2:return n=e.sent,e.abrupt("return",n&&!n.error);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),L=function(){var e=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("/admin/api/users/".concat(t),"DELETE");case 2:return a=e.sent,e.abrupt("return",a&&!a.error);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("/admin/api/checkpoints","POST",{checkpoints:t});case 2:return a=e.sent,e.abrupt("return",a&&!a.error);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(f.a)(d.a.mark((function e(t){var a,n,r,c,s,o,l,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.latitude,n=t.longitude,r=t.country,c=t.locale,s=t.name,o=t.phone,l=t.email,e.next=3,E("/admin/api/location","POST",{latitude:a,longitude:n,country:r,locale:c,name:s,phone:o,email:l});case 3:return u=e.sent,e.abrupt("return",u&&!u.error&&u.checkpointKey);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("/admin/api/checkpoints/locations");case 2:return t=e.sent,e.abrupt("return",t&&t.checkpoints?t.checkpoints:void 0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("https://api.locize.app/languages/".concat("my-product-id"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("https://api.locize.app/".concat("my-product-id","/latest/").concat(t,"/translation"));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function M(e){var t=e.onLoginRequest,a=Object(n.useState)(""),c=Object(h.a)(a,2),s=c[0],o=c[1],l=Object(n.useState)(""),u=Object(h.a)(l,2),i=u[0],p=u[1],m=Object(g.a)().t,_=function(){var e=Object(f.a)(d.a.mark((function e(a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,y(s,i);case 3:n=e.sent,t(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{className:"form-signin",onSubmit:_},r.a.createElement("h1",{className:"h3 mb-3 font-weight-normal"},m("login_title")),r.a.createElement("label",{htmlFor:"email",className:"sr-only"},m("login_username"),":"),r.a.createElement("br",null),r.a.createElement("input",{value:s,onChange:function(e){o(e.target.value)},type:"email",id:"email",name:"email",placeholder:m("login_username"),className:"form-control"}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"password",className:"sr-only"},m("login_password"),":"),r.a.createElement("br",null),r.a.createElement("input",{value:i,onChange:function(e){p(e.target.value)},type:"password",id:"password",name:"password",placeholder:m("login_password"),className:"form-control"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-lg btn-warning btn-block",type:"submit"},m("login_submit_button")),r.a.createElement("p",{className:"mt-5"},r.a.createElement(b.b,{className:"link text-warning",to:"/forgot-password"},m("login_forgot_password"))),r.a.createElement("p",{className:"mt-2 mb-3 text-muted"},m("login_no_account_1")," ",r.a.createElement("a",{href:"https://forms.gle/J38BLRpFtRFT846Z8",target:"_blank",className:"text-warning"},m("login_no_account_2")),"."),r.a.createElement("p",{className:"mt-5 mb-3 text-muted"},"TrackCOVID"," ",m("admin")))}function B(){var e=Object(n.useState)(""),t=Object(h.a)(e,2),a=t[0],c=t[1],s=Object(g.a)().t,o=function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,C({username:a});case 3:e.sent?alert(s("reset_password_request_success")):alert(s("reset_password_request_fail"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{class:"form-signin",onSubmit:o},r.a.createElement("h1",{class:"h3 mb-3 font-weight-normal"},s("reset_password_request_title")),r.a.createElement("label",{for:"email",class:"sr-only"},s("login_username"),":"),r.a.createElement("br",null),r.a.createElement("input",{value:a,onChange:function(e){c(e.target.value)},type:"email",id:"email",name:"email",placeholder:s("login_username"),class:"form-control"}),r.a.createElement("br",null),r.a.createElement("button",{class:"btn btn-lg btn-warning btn-block",type:"submit"},s("reset_password_request_submit")),r.a.createElement("p",{class:"mt-5 mb-3 text-muted"},"TrackCOVID"," ",s("admin")),r.a.createElement("p",{class:"mt-5"},r.a.createElement(b.b,{class:"link text-warning",to:"/login"},s("reset_password_cancel"))))}function q(){var e=Object(n.useState)(""),t=Object(h.a)(e,2),a=t[0],c=t[1],s=Object(g.a)().t,o=function(){var e=Object(f.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=new URLSearchParams(window.location.search),r=n.get("token"),e.next=5,S({newPassword:a,token:r});case 5:e.sent?alert(s("reset_password_success")):alert(s("reset_password_fail"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{class:"form-signin",onSubmit:o},r.a.createElement("h1",{class:"h3 mb-3 font-weight-normal"},s("reset_password_title")),r.a.createElement("label",{htmlFor:"password",class:"sr-only"},s("account_new_password"),":"),r.a.createElement("br",null),r.a.createElement("input",{value:a,onChange:function(e){c(e.target.value)},type:"password",id:"password",name:"password",placeholder:s("account_new_password"),class:"form-control"}),r.a.createElement("br",null),r.a.createElement("button",{class:"btn btn-lg btn-warning btn-block",type:"submit"},s("reset_password_submit")),r.a.createElement("p",{class:"mt-5 mb-3 text-muted"},"TrackCOVID"," ",s("admin")),r.a.createElement("p",{class:"mt-5"},r.a.createElement(b.b,{class:"link text-warning",to:"/login"},s("reset_password_cancel"))))}var F=function(e){try{JSON.parse(e)}catch(t){return!1}return!0};function J(e){e.onUpload;var t=Object(g.a)().t;return r.a.createElement("div",null,r.a.createElement("div",{class:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"},r.a.createElement("h1",{class:"h2"},t("upload_title"))),r.a.createElement("form",{id:"checkpoint-upload-form"},r.a.createElement("p",null,t("upload_instructions_1")," ","https://tracking-covid-19-gambia.herokuapp.com",". ",t("upload_instructions_2")),r.a.createElement("p",null,t("upload_instructions_3")),r.a.createElement("div",{class:"alert alert-success",style:{display:"none"},id:"upload-success",role:"alert"},t("upload_success")),r.a.createElement("input",{class:"btn btn-large btn-warning",type:"file",id:"checkpoint-upload",onChange:function(){var e=document.getElementById("checkpoint-upload").files;if(e.length<=0)return!1;var a=new FileReader;a.onload=function(){var e=Object(f.a)(d.a.mark((function e(a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a&&a.target.result&&F(a.target.result))){e.next=9;break}return n=JSON.parse(a.target.result),e.next=4,P(n);case 4:e.sent?alert(t("upload_success")):alert(t("upload_fail")),document.getElementById("checkpoint-upload-form").reset(),e.next=10;break;case 9:alert(t("upload_fail"));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.readAsText(e.item(0))}})))}var V=Boolean("my-product-id");function z(){var e=Object(n.useState)(""),t=Object(h.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),o=Object(h.a)(s,2),l=o[0],u=o[1],i=Object(n.useState)(""),p=Object(h.a)(i,2),m=p[0],b=p[1],_=Object(n.useState)(null),w=Object(h.a)(_,2),v=w[0],k=w[1],E=Object(n.useState)(null),y=Object(h.a)(E,2),x=y[0],O=y[1],j=Object(n.useState)(null),C=Object(h.a)(j,2),S=C[0],N=C[1],T=Object(n.useState)(null),U=Object(h.a)(T,2),L=U[0],P=U[1],R=Object(n.useState)([]),M=Object(h.a)(R,2),B=M[0],q=M[1],F=Object(n.useState)(""),J=Object(h.a)(F,2),z=J[0],G=J[1],H=Object(g.a)().t,Z={};function Y(e,t){null!==e&&null!==t&&(v.setCenter({lat:e,lng:t}),v.setZoom(16))}Object(n.useEffect)((function(){if(!v){var e={zoom:3,center:new window.google.maps.LatLng(37.09024,-95.712891),mapTypeControl:!1,navigationControl:!1,mapTypeId:window.google.maps.MapTypeId.ROADMAP},t=new window.google.maps.Map(document.getElementById("map-canvas"),e);k(t)}if(v&&!x){var a=document.getElementById("search-text-field"),n=new window.google.maps.places.Autocomplete(a);O(n),window.google.maps.event.addListener(n,"place_changed",(function(){var e=n.getPlace(),t=e.geometry.location.lat(),a=e.geometry.location.lng();N(t),P(a),Y(t,a)}))}V&&0===B.length&&I().then(function(){var e=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.keys(t).map((function(e){return new Promise(function(){var a=Object(f.a)(d.a.mark((function a(n){var r;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,D(e);case 2:(r=a.sent).pdfTitle?n({languageCode:e,languageName:Z[e]||t[e].name,altTitle:r.pdfTitle,altHelp:r.pdfHelp}):n(null);case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())})));case 2:a=e.sent,q(a.filter((function(e){return null!==e&&"en"!==e.languageCode})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[v,x,Z,B]);var Q=function(){var e=Object(f.a)(d.a.mark((function e(t){var n,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A({latitude:S,longitude:L,name:a,phone:l,email:m});case 2:n=e.sent,r="",""!==z&&(c=B.find((function(e){return e.languageCode===z})),r="?altTitle=".concat(c.altTitle,"&altHelp=").concat(c.altHelp)),window.location.href="".concat("https://tracking-covid-19-gambia.herokuapp.com","/admin/generate/").concat(n,"/checkpoint.pdf").concat(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=null===S||null===L||!a,$=null!==S&&null!==L?"http://maps.google.com/?q=".concat(S,",").concat(L):"http://maps.google.com";return r.a.createElement("div",null,r.a.createElement("div",{class:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-left pt-3 pb-2 mb-3 border-bottom"},r.a.createElement("h1",{class:"h2"},H("create_checkpoint_title"))),r.a.createElement("input",{id:"search-text-field",type:"text",placeholder:H("create_checkpoint_address"),class:"form-control"}),r.a.createElement("div",{id:"map-canvas"}),r.a.createElement("a",{href:$,class:"btn btn-primary mb-3",target:"_blank"},H("create_checkpoint_external_map")),r.a.createElement("form",{class:"form-create-checkpoint"},r.a.createElement("label",{style:{display:"none"}},H("create_checkpoint_lat")),r.a.createElement("input",{style:{display:"none"},value:S||"",onChange:function(e){var t=Number(e.target.value);N(t),Y(t,L)},type:"number",placeholder:H("create_checkpoint_lat"),class:"form-control mb-3"}),r.a.createElement("label",{style:{display:"none"}},H("create_checkpoint_long")),r.a.createElement("input",{style:{display:"none"},value:L||"",onChange:function(e){var t=Number(e.target.value);P(t),Y(S,t)},type:"number",placeholder:H("create_checkpoint_long"),class:"form-control mb-3"}),r.a.createElement("label",null,H("create_checkpoint_name")),r.a.createElement("input",{value:a,onChange:function(e){c(e.target.value)},type:"text",placeholder:H("create_checkpoint_name"),maxlength:"80",class:"form-control mb-3"}),r.a.createElement("label",null,H("create_checkpoint_phone")),r.a.createElement("input",{value:l,onChange:function(e){u(e.target.value)},type:"text",placeholder:H("create_checkpoint_phone"),class:"form-control mb-3"}),r.a.createElement("label",null,H("create_checkpoint_email")),r.a.createElement("input",{value:m,onChange:function(e){b(e.target.value)},type:"text",placeholder:H("create_checkpoint_email"),class:"form-control mb-3"}),B.length>0&&r.a.createElement("div",null,r.a.createElement("label",null,H("create_checkpoint_additional_language")),r.a.createElement("select",{class:"custom-select mb-3",onChange:function(e){G(e.target.value)},value:z},r.a.createElement("option",{value:""},H("create_checkpoint_additional_language_none")),B.map((function(e,t){return r.a.createElement("option",{key:t,value:e.languageCode},"English + ",e.languageName)}))))),r.a.createElement("button",{class:"btn btn-lg btn-warning btn-block mt-3 mb-3",onClick:Q,disabled:W},H("create_checkpoint_submit")))}var G=[];function H(){var e=Object(n.useState)(null),t=Object(h.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)([]),o=Object(h.a)(s,2),l=o[0],u=o[1],i=Object(n.useState)([]),p=Object(h.a)(i,2),m=p[0],b=p[1],_=Object(n.useState)({}),w=Object(h.a)(_,2),v=w[0],k=w[1],E=Object(g.a)().t;function y(){return(y=Object(f.a)(d.a.mark((function e(){var t,a,n,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:t=e.sent,a={},n=t.filter((function(e){var t=!a[e.key];return a[e.key]=a[e.key]?a[e.key]+1:1,t})),k(a),b(n.map((function(){return!0}))),u(n),r={mapTypeControl:!1,navigationControl:!1,mapTypeId:window.google.maps.MapTypeId.ROADMAP},s=new window.google.maps.Map(document.getElementById("map-canvas"),r),c(s),x(s);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return O.apply(this,arguments)}function O(){return(O=Object(f.a)(d.a.mark((function e(t){var n,r,c,s,o,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=a||t,r=new window.google.maps.LatLngBounds,c=l.map((function(e){return[e.location.name,e.location.latitude,e.location.longitude]})).filter((function(e,t){return m[t]})),s=new window.google.maps.InfoWindow,G.forEach((function(e){e.setMap(null)})),G=[],u=0;u<c.length;u++)o=new window.google.maps.Marker({position:new window.google.maps.LatLng(c[u][1],c[u][2]),map:n}),G.push(o),r.extend(o.position),window.google.maps.event.addListener(o,"click",function(e,t){return function(){s.setContent(c[t][0]),s.open(n,e)}}(o,u));n.fitBounds(r),1===c.length&&n.setZoom(16);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){a?x():function(){y.apply(this,arguments)}()}),[a,l,m]),r.a.createElement("div",null,r.a.createElement("div",{class:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-left pt-3 pb-2 mb-3 border-bottom"},r.a.createElement("h1",{class:"h2"},E("reports_title"))),r.a.createElement("div",{id:"map-canvas"}),r.a.createElement("button",{class:"btn btn-primary mr-2",onClick:function(){b(l.map((function(){return!0})))}},"Select All"),r.a.createElement("button",{class:"btn btn-secondary",onClick:function(){b(l.map((function(){return!1})))}},"Unselect All"),r.a.createElement("table",{class:"table mt-3"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Show on map"),r.a.createElement("th",{scope:"col"},"Location"),r.a.createElement("th",{scope:"col"},"Phone"),r.a.createElement("th",{scope:"col"},"Email"),r.a.createElement("th",{scope:"col"},"Exposures"))),r.a.createElement("tbody",null,l.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("th",{scope:"row"},r.a.createElement("div",{class:"form-check"},r.a.createElement("input",{class:"form-check-input",type:"checkbox",checked:m[t],onChange:function(){return e=t,void b(m.map((function(t,a){return a===e?!t:t})));var e}}))),r.a.createElement("td",null,e.location.name),r.a.createElement("td",null,e.location.phone),r.a.createElement("td",null,e.location.email),r.a.createElement("td",null,v[e.key]))})))),r.a.createElement("a",{class:"btn btn-lg btn-warning btn-block mt-3 mb-3",href:"".concat("https://tracking-covid-19-gambia.herokuapp.com","/admin/hotspots.csv")},E("reports_csv")))}var Z={list:1,new:2};function Y(e){var t=e.currentUser,a=Object(n.useState)(void 0),c=Object(h.a)(a,2),s=c[0],o=c[1],l=Object(n.useState)(Z.list),u=Object(h.a)(l,2),i=u[0],p=u[1],m=Object(n.useState)(""),b=Object(h.a)(m,2),_=b[0],w=b[1],v=Object(n.useState)(!0),k=Object(h.a)(v,2),E=k[0],y=k[1],x=Object(n.useState)(!1),C=Object(h.a)(x,2),S=C[0],T=C[1],U=Object(n.useState)(!1),P=Object(h.a)(U,2),A=P[0],R=P[1],I=Object(n.useState)(!1),D=Object(h.a)(I,2),M=D[0],B=D[1],q=Object(n.useState)(""),F=Object(h.a)(q,2),J=F[0],V=F[1],z=Object(g.a)().t,G=s||[],H=function(){var e=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:"undefined"!==typeof(t=e.sent)&&o(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){"undefined"===typeof s&&H()}));var Y=function(){var e=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(_).toLowerCase())){e.next=11;break}return e.next=5,j({username:_,canUploadCheckpoints:E,canCreateCheckpoints:S,canManageUsers:A,canAccessReports:M});case 5:"undefined"===typeof(a=e.sent)?alert(z("user_create_fail")):(V(a.username),p(Z.created),H()),w(""),R(!1),e.next=12;break;case 11:alert(z("user_create_invalid_username"));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(f.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n={userId:t.id,canUploadCheckpoints:t.canUploadCheckpoints,canCreateCheckpoints:t.canCreateCheckpoints,canManageUsers:t.canManageUsers,canAccessReports:t.canAccessReports})[a]=!t[a],e.next=4,N(n);case 4:if(!e.sent){e.next=8;break}H(),e.next=9;break;case 8:alert("Oops, something went wrong.");case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),W=function(){var e=Object(f.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("".concat(z("user_delete_confirm"),": ").concat(a,"?"))){e.next=5;break}return e.next=3,L(t);case 3:e.sent?H():alert(z("user_delete_fail"));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",{class:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"},r.a.createElement("h1",{class:"h2"},"Users")),i===Z.list&&r.a.createElement("div",null,r.a.createElement("a",{class:"btn btn-dark text-light mb-2",onClick:function(){return p(Z.new)}},"New user"),r.a.createElement("table",{class:"table mt-3"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},z("login_username")),r.a.createElement("th",{scope:"col"},z("user_create_can_upload_checkpoints")),r.a.createElement("th",{scope:"col"},z("user_create_can_create_checkpoints")),r.a.createElement("th",{scope:"col"},z("user_create_can_manage_users")),r.a.createElement("th",{scope:"col"},z("user_create_can_access_reports")),r.a.createElement("th",{scope:"col"}))),r.a.createElement("tbody",null,G.map((function(e,a){var n=e.id!==t.id;return r.a.createElement("tr",{key:a},r.a.createElement("td",null,e.username),r.a.createElement("td",null,n&&r.a.createElement("div",{class:"form-check"},r.a.createElement("input",{class:"form-check-input",type:"checkbox",checked:e.canUploadCheckpoints,onChange:function(){return Q(e,"canUploadCheckpoints")}}))),r.a.createElement("td",null,n&&r.a.createElement("div",{class:"form-check"},r.a.createElement("input",{class:"form-check-input",type:"checkbox",checked:e.canCreateCheckpoints,onChange:function(){return Q(e,"canCreateCheckpoints")}}))),r.a.createElement("td",null,n&&r.a.createElement("div",{class:"form-check"},r.a.createElement("input",{class:"form-check-input",type:"checkbox",checked:e.canManageUsers,onChange:function(){return Q(e,"canManageUsers")}}))),r.a.createElement("td",null,n&&r.a.createElement("div",{class:"form-check"},r.a.createElement("input",{class:"form-check-input",type:"checkbox",checked:e.canAccessReports,onChange:function(){return Q(e,"canAccessReports")}}))),r.a.createElement("td",null,n&&r.a.createElement("a",{onClick:function(){return W(e.id,e.username)},class:"btn btn-danger text-light user-delete"},z("user_delete_button"))))}))))),i===Z.new&&r.a.createElement("form",{class:"form-signin",onSubmit:Y},r.a.createElement("h2",{class:"h3 mb-3 font-weight-normal"},z("user_create_title")),r.a.createElement("label",{for:"email",class:"sr-only"},z("user_create_username"),":"),r.a.createElement("input",{value:_,onChange:function(e){w(e.target.value)},type:"email",id:"email",name:"email",placeholder:z("user_create_username"),class:"form-control mb-3"}),r.a.createElement("div",{class:"form-check"},r.a.createElement("input",{checked:E,onChange:function(){y(!E)},class:"form-check-input",type:"checkbox",id:"can-upload"}),r.a.createElement("label",{class:"form-check-label",for:"can-upload"},z("user_create_can_upload_checkpoints"))),r.a.createElement("div",{class:"form-check"},r.a.createElement("input",{checked:S,onChange:function(){T(!S)},class:"form-check-input",type:"checkbox",id:"can-create"}),r.a.createElement("label",{class:"form-check-label",for:"can-create"},z("user_create_can_create_checkpoints"))),r.a.createElement("div",{class:"form-check"},r.a.createElement("input",{checked:A,onChange:function(){R(!A)},class:"form-check-input",type:"checkbox",id:"can-manage"}),r.a.createElement("label",{class:"form-check-label",for:"can-manage"},z("user_create_can_manage_users"))),r.a.createElement("div",{class:"form-check"},r.a.createElement("input",{checked:M,onChange:function(){B(!M)},class:"form-check-input",type:"checkbox",id:"can-access-reports"}),r.a.createElement("label",{class:"form-check-label",for:"can-access-reports"},z("user_create_can_access_reports"))),r.a.createElement("button",{class:"btn btn-lg btn-warning btn-block mt-3",type:"submit"},z("user_create_submit"))),i===Z.created&&r.a.createElement("div",null,r.a.createElement("p",{class:"mb-3 font-weight-normal"},z("user_create_success")),r.a.createElement("p",null,z("user_create_username"),": ",r.a.createElement("strong",null,J)),r.a.createElement("a",{class:"btn btn-dark text-light mt-2",onClick:function(){return p(Z.list)}},z("user_create_exit"))))}function Q(){var e=Object(n.useState)(""),t=Object(h.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),o=Object(h.a)(s,2),l=o[0],u=o[1],i=Object(n.useState)(""),p=Object(h.a)(i,2),m=p[0],b=p[1],_=Object(g.a)().t,w=function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!/^[\w!@#$%^&*]{8,}$/.test(l)){e.next=9;break}return e.next=5,U(a,l);case 5:e.sent?(alert(_("account_update_password_success")),c(""),u("")):alert(_("account_current_password_incorrect")),e.next=10;break;case 9:alert(_("account_new_password_invalid"));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,T({username:m});case 3:e.sent?(alert(_("account_update_username_success")),c(""),u("")):alert(_("account_update_username_fail"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",{class:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-left pt-3 pb-2 mb-3 border-bottom"},r.a.createElement("h1",{class:"h2"},_("account_title"))),r.a.createElement("form",{class:"form-signin",onSubmit:v},r.a.createElement("h2",{class:"h3 mb-3 font-weight-normal"},_("account_update_username_title")),r.a.createElement("label",{for:"new-username",class:"sr-only"},_("account_new_username"),":"),r.a.createElement("input",{value:m,onChange:function(e){b(e.target.value)},type:"email",id:"new-username",name:"new-username",placeholder:_("account_new_username"),class:"form-control"}),r.a.createElement("button",{class:"btn btn-lg btn-warning btn-block mt-3",type:"submit"},_("account_update_username_submit"))),r.a.createElement("form",{class:"form-signin",onSubmit:w},r.a.createElement("h2",{class:"h3 mb-3 font-weight-normal"},_("account_update_password_title")),r.a.createElement("p",null,_("account_password_instructions")),r.a.createElement("label",{for:"current-password",class:"sr-only"},_("account_current_password"),":"),r.a.createElement("input",{value:a,onChange:function(e){c(e.target.value)},type:"password",id:"username",name:"current-password",placeholder:_("account_current_password"),class:"form-control"}),r.a.createElement("label",{for:"new-password",class:"sr-only"},_("account_new_password"),":"),r.a.createElement("input",{value:l,onChange:function(e){u(e.target.value)},type:"password",id:"username",name:"new-password",placeholder:_("account_new_password"),class:"form-control"}),r.a.createElement("button",{class:"btn btn-lg btn-warning btn-block mt-3",type:"submit"},_("account_update_password_submit"))))}var W="/dashboard/checkpoints/upload",$="/dashboard/users",K="/dashboard/account",X="/dashboard/checkpoints/new",ee="/dashboard/reports",te="/login",ae="/forgot-password",ne="/reset-password";function re(e){var t=e.history,a=Object(n.useState)(void 0),c=Object(h.a)(a,2),s=c[0],o=c[1],l=Object(n.useState)({}),u=Object(h.a)(l,2),i=u[0],p=u[1],m=i&&Boolean(i.canUploadCheckpoints),w=i&&Boolean(i.canCreateCheckpoints),v=i&&Boolean(i.canManageUsers),k=i&&Boolean(i.canAccessReports),E=Object(g.a)().t,y=function(){var e=Object(f.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:"undefined"!==typeof(a=e.sent)?(t.location.pathname.includes("/dashboard")||t.push(O(!0,a)),o(!0),p(a)):(t.location.pathname.includes("/dashboard")&&t.push(O(!1,a)),o(!1));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){"undefined"===typeof s&&y()}),[s]);var O=function(e,t){return e?t.canUploadCheckpoints?W:t.canCreateCheckpoints?X:t.canManageUsers?$:t.canAccessReports?ee:K:te},j=function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t?y():alert("Login failed");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(e){return s?r.a.createElement("div",{className:"App"},r.a.createElement("nav",{className:"navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow"},r.a.createElement("a",{className:"navbar-brand col-sm-3 col-md-2 mr-0",href:"/admin"},"TrackCOVID"," ",E("admin")),r.a.createElement("div",{className:"text-light"},E("welcome"),": ",i.username),r.a.createElement("ul",{className:"navbar-nav px-3"},r.a.createElement("li",{className:"nav-item text-nowrap"},r.a.createElement("a",{className:"nav-link",href:"".concat("https://tracking-covid-19-gambia.herokuapp.com","/admin/logout")},E("logout_button"))))),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("nav",{className:"col-md-2 d-none d-md-block bg-light sidebar"},r.a.createElement("div",{className:"sidebar-sticky"},r.a.createElement("ul",{className:"nav flex-column"},m&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(b.c,{className:"nav-link",activeClassName:"nav-link active",to:W},E("menu_checkpoints"))),w&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(b.c,{className:"nav-link",activeClassName:"active",to:X},E("menu_checkpoint_pdf"))),k&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(b.c,{className:"nav-link",activeClassName:"active",to:ee},E("menu_reports"))),v&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(b.c,{className:"nav-link",activeClassName:"active",to:$},E("menu_users"))),r.a.createElement("li",{className:"nav-item"},r.a.createElement(b.c,{className:"nav-link",activeClassName:"active",to:K},E("menu_account")))))),r.a.createElement("main",{role:"main",className:"col-md-9 ml-sm-auto col-lg-10 px-4"},r.a.createElement(e,null))))):r.a.createElement("div",{className:"login-container bg-dark text-center text-light"},r.a.createElement(e,null))};return r.a.createElement("div",null,r.a.createElement(_.b,{path:te,component:function(){return C((function(){return r.a.createElement(M,{onLoginRequest:j})}))}}),r.a.createElement(_.b,{path:ae,component:function(){return C(B)}}),r.a.createElement(_.b,{path:ne,component:function(){return C(q)}}),r.a.createElement(_.b,{path:W,component:function(){return C(J)}}),r.a.createElement(_.b,{path:X,component:function(){return C(z)}}),r.a.createElement(_.b,{path:ee,component:function(){return C(H)}}),r.a.createElement(_.b,{path:$,component:function(){return C((function(){return r.a.createElement(Y,{currentUser:i})}))}}),r.a.createElement(_.b,{path:K,component:function(){return C(Q)}}),("/"===t.location.pathname||"/admin"===t.location.pathname)&&r.a.createElement(_.a,{from:"/",to:O()}))}var ce=function(){var e=Object(w.a)(),t=Object(_.f)(re);return r.a.createElement(b.a,{basename:"/admin"},r.a.createElement(t,{history:e}))};s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ce,null)),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.17f8d526.chunk.js.map